{"ast":null,"code":"var _jsxFileName = \"/Users/zetachua/Documents/GitHub/DanceMarketplace/src/Components/ScreenrecordToGif/screenRecordToGif.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport Whammy from 'whammy';\nimport GIF from 'gif.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScreenRecorderWithGIFConversion = () => {\n  _s();\n  const videoRef = useRef();\n  const [recording, setRecording] = useState(false);\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        video: true\n      });\n      const recorder = new MediaRecorder(stream);\n      const chunks = [];\n      recorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          chunks.push(event.data);\n        }\n      };\n      recorder.onstop = () => {\n        const webmBlob = new Blob(chunks, {\n          type: 'video/webm'\n        });\n        const webmUrl = URL.createObjectURL(webmBlob);\n        videoRef.current.src = webmUrl;\n        convertWebMToGIF(webmBlob);\n      };\n      recorder.start();\n      setRecording(true);\n      setTimeout(() => {\n        recorder.stop();\n        stream.getTracks().forEach(track => track.stop());\n        setRecording(false);\n      }, 5000); // Recording for exactly 5 seconds\n    } catch (error) {\n      console.error('Error starting recording:', error);\n    }\n  };\n  const convertWebMToGIF = webmBlob => {\n    const videoElement = document.createElement('video');\n    videoElement.src = URL.createObjectURL(webmBlob);\n    videoElement.addEventListener('loadeddata', async () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = Math.floor(videoElement.videoWidth / 2); // Adjust width as needed\n      canvas.height = Math.floor(videoElement.videoHeight / 2); // Adjust height as needed\n\n      const ctx = canvas.getContext('2d');\n      const gif = new GIF({\n        workers: 2,\n        quality: 10\n      }); // Adjust workers and quality as needed\n\n      for (let i = 0; i < videoElement.duration * 25; i++) {\n        // Adjust frame rate as needed\n        ctx.drawImage(videoElement, 0, 0, videoElement.videoWidth, videoElement.videoHeight, 0, 0, canvas.width, canvas.height);\n        gif.addFrame(ctx, {\n          copy: true,\n          delay: 40\n        }); // Adjust the delay as needed (25 frames per second)\n      }\n\n      gif.on('finished', blob => {\n        const gifUrl = URL.createObjectURL(blob);\n        videoRef.current.src = gifUrl;\n      });\n      gif.render();\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startRecording,\n      disabled: recording,\n      children: recording ? 'Recording...' : 'Start Recording'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      controls: true,\n      style: {\n        height: '100px',\n        marginTop: '10px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(ScreenRecorderWithGIFConversion, \"JLHxrYDiFRBqQRzccvySQ7gjsCg=\");\n_c = ScreenRecorderWithGIFConversion;\nexport default ScreenRecorderWithGIFConversion;\nvar _c;\n$RefreshReg$(_c, \"ScreenRecorderWithGIFConversion\");","map":{"version":3,"names":["React","useRef","useState","Whammy","GIF","jsxDEV","_jsxDEV","ScreenRecorderWithGIFConversion","_s","videoRef","recording","setRecording","startRecording","stream","navigator","mediaDevices","getDisplayMedia","video","recorder","MediaRecorder","chunks","ondataavailable","event","data","size","push","onstop","webmBlob","Blob","type","webmUrl","URL","createObjectURL","current","src","convertWebMToGIF","start","setTimeout","stop","getTracks","forEach","track","error","console","videoElement","document","createElement","addEventListener","canvas","width","Math","floor","videoWidth","height","videoHeight","ctx","getContext","gif","workers","quality","i","duration","drawImage","addFrame","copy","delay","on","blob","gifUrl","render","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","ref","controls","style","marginTop","_c","$RefreshReg$"],"sources":["/Users/zetachua/Documents/GitHub/DanceMarketplace/src/Components/ScreenrecordToGif/screenRecordToGif.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport Whammy from 'whammy';\nimport GIF from 'gif.js';\n\nconst ScreenRecorderWithGIFConversion = () => {\n  const videoRef = useRef();\n  const [recording, setRecording] = useState(false);\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });\n      const recorder = new MediaRecorder(stream);\n\n      const chunks = [];\n      recorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          chunks.push(event.data);\n        }\n      };\n\n      recorder.onstop = () => {\n        const webmBlob = new Blob(chunks, { type: 'video/webm' });\n        const webmUrl = URL.createObjectURL(webmBlob);\n        videoRef.current.src = webmUrl;\n\n        convertWebMToGIF(webmBlob);\n      };\n\n      recorder.start();\n      setRecording(true);\n\n      setTimeout(() => {\n        recorder.stop();\n        stream.getTracks().forEach((track) => track.stop());\n        setRecording(false);\n      }, 5000); // Recording for exactly 5 seconds\n    } catch (error) {\n      console.error('Error starting recording:', error);\n    }\n  };\n\n  const convertWebMToGIF = (webmBlob) => {\n    const videoElement = document.createElement('video');\n    videoElement.src = URL.createObjectURL(webmBlob);\n    videoElement.addEventListener('loadeddata', async () => {\n      const canvas = document.createElement('canvas');\n      canvas.width = Math.floor(videoElement.videoWidth / 2); // Adjust width as needed\n      canvas.height = Math.floor(videoElement.videoHeight / 2); // Adjust height as needed\n  \n      const ctx = canvas.getContext('2d');\n      const gif = new GIF({ workers: 2, quality: 10 }); // Adjust workers and quality as needed\n  \n      for (let i = 0; i < videoElement.duration * 25; i++) { // Adjust frame rate as needed\n        ctx.drawImage(\n          videoElement,\n          0,\n          0,\n          videoElement.videoWidth,\n          videoElement.videoHeight,\n          0,\n          0,\n          canvas.width,\n          canvas.height\n        );\n        gif.addFrame(ctx, { copy: true, delay: 40 }); // Adjust the delay as needed (25 frames per second)\n      }\n  \n      gif.on('finished', (blob) => {\n        const gifUrl = URL.createObjectURL(blob);\n        videoRef.current.src = gifUrl;\n      });\n  \n      gif.render();\n    });\n  };\n  \n  \n\n  return (\n    <div>\n      <button onClick={startRecording} disabled={recording}>\n        {recording ? 'Recording...' : 'Start Recording'}\n      </button>\n      <video ref={videoRef} controls style={{ height:'100px',marginTop: '10px' }} />\n    </div>\n  );\n};\n\nexport default ScreenRecorderWithGIFConversion;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}